---
layout: ../../layouts/PostLayout.astro
title: "TIL: Deploying Static Website with Dokku"
description: "Learning Dokku by migrating my blog from Coolify"
pubDate: 2025-11-30
---

> Recently, I was heavily inspired by a
> [Simon Willison comment](https://news.ycombinator.com/item?id=46011877)
> regarding blogging that I read on HN. I fully agree that blogging can be a
> "valuable resource for your future self". Therefore, this is my first "Today I
> Learned" blog post. I think I am especially attracted to the idea of removing
> most friction that comes from writing a full blog post. Hopefully, these
> resources are useful for my future self as well as for others.

This weekend I felt inspired to migrate some of my personal projects from
Coolify to Dokku. In general, Coolify is a fantastic technology. However, I
spent a big amount of my time looking at AWS consoles and dealing with managed
services. Perhaps Coolify is not exactly comparable to AWS, but it is also not
exactly what I am looking for: having fun playing with my VPS while reliving
some of my oxidized Linux knowledge.

I knew about Dokku for a long time. I was attracted by the idea of a lightweight
PaaS with only CLI. Furthermore, I do appreciate how mature the project is. I
decided, therefore, to give it a try and, to my surprise, the experience was
quite enjoyable.

Configuring my domains was extremely easy:

```bash
dokku domain:set endlessqueue endlessqueue.com
```

Moving away from Cloudflare comes with the tradeoff of having to manage your SSL
certificates. However, using `letsencrypt` with an auto-renewal cronjob was
extremely easy:

```bash
sudo dokku plugin:install https://github.com/dokku/dokku-letsencrypt.git
dokku letsencrypt:set --global email $EMAIL
dokku letsencrypt:enable
dokku letsencrypt:cron-job --add
```

The best part, nevertheless, is how the deployments work. I was expecting that
you had to build the image and then push to a registry or something similar. To
my surprise, you just have to add a remote to your Git repository:

```bash
git remote add dokku dokku@endlessqueue.com:endlessqueue
git push dokku main
```

This is brilliant ðŸ¤¯! Dokku will then use Buildpacks to try to understand the
project content and build it without any configuration. I ran into some problems
because my package.json had a `start` command. However, this command was meant
for local development only as the output is completely static.

After some research, I found that the solution is to create a `.buildpacks` file
to use multiple builders:

```md
https://github.com/heroku/heroku-buildpack-nodejs.git
https://github.com/dokku/buildpack-nginx.git
```

This will first use the Node.js builder and then it will deploy it as a static
website using nginx if there's a `.static` file in the root of the repo.
Finally, we have to inform nginx where to find the static files:

```bash
dokku config:set endlessqueue NGINX_ROOT=dist
```

And that's everything!

P.S. I just noticed that my last blog post was published exactly one year ago.
